{% if current_user.is_anonymous %}
  {% extends "base.html" %}
{% else %}
  {% extends "app.html" %}
{% endif %}

{% block app_content %}
<div class="row">
  <div class="col-md-12">

<div class="jumbotron">
<div class="media">
  <div class="media-body">
    <h4 class="media-heading">Con·bench</h4>
     <h4>/kənˈben(t)SH/</h4>
     <h5><i>noun</i></h5>
     <h3>Language-independent Continuous Benchmarking (CB) Framework</h3>
  </div>
  <div class="media-right">
     <img class="media-object" style="padding: 5px" src="{{ url_for('static', filename='bar-graph.png') }}" height="150">
  </div>
</div>
</div>

  </div>
</div>


<div class="row">
    <div class="col-md-12">
        <table id="runs" class="table table-striped table-bordered table-hover">
          <caption>Runs</div>
          </caption>
            <thead>
                <tr>
                    <th scope="col">Run</th>
                    <th scope="col">Author</th>
                    <th scope="col">Repository</th>
                    <th scope="col">Commit</th>
                    <th scope="col">Date</th>
                    <th scope="col">Machine</th>
                </tr>
            </thead>
            <tbody>
                {% for run in runs %}
                <tr>
                     <td><a href="{{ url_for('app.run', run_id=run.id) }}">{{ run.display_timestamp }}</a></td>
                     <td>
                       {{ run.commit.author_name }}
                     </td>
                     <td><a href="{{ run.commit.repository }}">{{ run.commit.repository.split("https://github.com/")[1] }}</a></td>
                     <td><a href="{{ run.commit.url }}">{{ run.commit.message }}</a></td>
                     <td>{{ run.commit.display_timestamp }}</td>
                     <td>{{ run.machine.name }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}


{% block scripts %}
{{super()}}
<script type="text/javascript">
  var table = $('#runs').dataTable( {
      "responsive": true,
      "order": [[0, 'desc']],
  } );
  new $.fn.dataTable.FixedHeader( table );
</script>
{% endblock %}
